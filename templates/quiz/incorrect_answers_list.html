{% extends 'base.html' %}

{% block content %}
    <div class="card">
        <div class="card-header">
            <h1>{{ quiz.title }} ì˜¤ë‹µë…¸íŠ¸</h1>
            <p class="mb-0">ì´ ì‹œí—˜ì—ì„œ í‹€ë ¸ë˜ ë¬¸ì œì…ë‹ˆë‹¤.</p>
        </div>
        <div class="card-body">
            {% if incorrect_questions %}
                {% for question in incorrect_questions %}
                    <div class="mb-4 p-3 border rounded">
                        <h5>{{ forloop.counter }}. {{ question.question_text }}</h5>

                        {% if question.image %}
                            <img src="{{ question.image.url }}" alt="ë¬¸ì œ ì´ë¯¸ì§€" class="img-fluid my-2" style="max-width: 300px;">
                        {% endif %}

                        {# --- ì •ë‹µ ë³´ê¸° í‘œì‹œ ê¸°ëŠ¥ ì¶”ê°€ --- #}
                        <ul class="list-unstyled mt-3">
                        {% for choice in question.choice_set.all %}
                            <li>
                                {% if choice.is_correct %}
                                    <strong style="color: green;">
                                        {% if choice.image %}<img src="{{ choice.image.url }}" alt="ë³´ê¸° ì´ë¯¸ì§€" style="max-height: 60px; vertical-align: middle;" class="me-2">{% endif %}
                                        {{ choice.choice_text }} &lt;-- ì •ë‹µ
                                    </strong>
                                {% else %}
                                    <span style="color: #6c757d;">
                                        {% if choice.image %}<img src="{{ choice.image.url }}" alt="ë³´ê¸° ì´ë¯¸ì§€" style="max-height: 60px; vertical-align: middle;" class="me-2">{% endif %}
                                        {{ choice.choice_text }}
                                    </span>
                                {% endif %}
                            </li>
                        {% endfor %}
                        </ul>
                        {# ---------------------------- #}

                    </div>
                {% endfor %}
            {% else %}
                <p>ì´ ì‹œí—˜ì—ì„œëŠ” í‹€ë¦° ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. í›Œë¥­í•©ë‹ˆë‹¤! ğŸ‘</p>
            {% endif %}

            <div class="mt-4">
                <a href="{% url 'quiz:my_incorrect_answers_index' %}" class="btn btn-secondary">ì˜¤ë‹µë…¸íŠ¸ ì²« í˜ì´ì§€ë¡œ</a>
            </div>
        </div>
    </div>
{% endblock %}