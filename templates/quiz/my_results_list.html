{% extends 'base.html' %}

{% block content %}
    <h1>{{ quiz.title }} 결과 목록</h1>

    {% if page_obj %}
        <div class="list-group mb-4">
        {% for result in page_obj %}
             <a href="{% url 'quiz:result_detail' result.id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                <span>
                    {{ result.attempt_number }}차 응시 -
                    {{ result.completed_at|date:"Y년 m월 d일 H:i" }} /
                    <strong>{{ result.score }}점</strong>
                </span>
                
                <!-- --- [핵심 수정] --- -->
                {% if result.is_pass %}
                    <span class="badge bg-success">합격</span>
                {% else %}
                    <span class="badge bg-danger">불합격</span>
                {% endif %}
                <!-- ----------------- -->
            </a>
        {% endfor %}
        </div>

        {# --- 페이지네이션 (누락 없음) --- #}
        <nav>
            <ul class="pagination justify-content-center">
                {% if page_obj.has_previous %}
                    <li class="page-item"><a class="page-link" href="?page=1">&laquo; 처음</a></li>
                    <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">이전</a></li>
                {% endif %}

                <li class="page-item active" aria-current="page">
                    <span class="page-link">{{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>
                </li>

                {% if page_obj.has_next %}
                    <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">다음</a></li>
                    <li class="page-item"><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">마지막 &raquo;</a></li>
                {% endif %}
            </ul>
        </nav>
        
    {% else %}
        <p class="mt-3"><strong>현재 로그인한 사용자({{ user.username }})</strong>의 시험 결과가 없습니다.</p>
    {% endif %}
{% endblock %}
